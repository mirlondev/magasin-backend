package org.odema.posnew.mapper;
import org.odema.posnew.dto.StoreDto;
import org.odema.posnew.entity.Store;
import org.odema.posnew.entity.enums.StoreStatus;
import org.odema.posnew.entity.enums.StoreType;
import org.springframework.stereotype.Component;

@Component
public class StoreMapper {

    public StoreDto toDto(Store store) {
        if (store == null) return null;

        return new StoreDto(
                store.getStoreId(),
                store.getName(),
                store.getAddress(),
                store.getCity(),
                store.getPostalCode(),
                store.getCountry(),
                store.getStoreType(),
                store.getStatus(),
                store.getPhone(),
                store.getEmail(),
                store.getOpeningHours(),
                store.getLatitude(),
                store.getLongitude(),
                store.getCreatedAt(),
                store.getUpdatedAt(),
                store.getIsActive(),
                store.getStoreAdmin() != null ? store.getStoreAdmin().getUserId() : null
        );
    }

    public Store toEntity(StoreDto dto) {
        if (dto == null) return null;

        Store store = new Store();
        store.setStoreId(dto.storeId() != null ? dto.storeId() : null);
        store.setName(dto.name());
        store.setAddress(dto.address());
        store.setCity(dto.city());
        store.setPostalCode(dto.postalCode());
        store.setCountry(dto.country());
        store.setStoreType(dto.storeType() != null ? dto.storeType() : StoreType.SHOP);
        store.setStatus(dto.status() != null ? dto.status() : StoreStatus.PENDING);
        store.setPhone(dto.phone());
        store.setEmail(dto.email());
        store.setOpeningHours(dto.openingHours());
        store.setLatitude(dto.latitude());
        store.setLongitude(dto.longitude());
        store.setIsActive(dto.isActive() != null ? dto.isActive() : true);

        return store;
    }
}